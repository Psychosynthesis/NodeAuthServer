import{u as x,a as u,A as m,b as c}from"./auth-70470ed5.js";import{r as d,g as p,j as e,O as j,u as f,i as g,a as E,c as y,R as v,N as R}from"./libs-7a07fc3c.js";const N=()=>{const n=x(),[r,s]=u(),{token:o}=r;return d.useEffect(()=>{p("hash")?n.updateToken().then(t=>{var l;t.error===!1?(t.data,s({type:"setToken",load:(l=t.data)==null?void 0:l.token})):window.location.href="/login"}):window.location.replace("/login")},[]),d.useEffect(()=>{o&&n.getUser().then(a=>{var t;a.error===!1?s({type:"setUserData",load:(t=a.data)==null?void 0:t.user}):console.error(a.message)})},[o]),e.jsxs("div",{className:"main-layout",children:[(r==null?void 0:r.user)&&e.jsxs("div",{children:["User: ",r.user.username]}),e.jsx(j,{})]})},h=()=>(u(),e.jsx("div",{className:"list",children:e.jsx("h2",{style:{textAlign:"center"},children:"List"})}));const i=({isNoFound:n})=>{var o;if(n)return e.jsxs("div",{className:"error-page",children:[e.jsx("h1",{children:"404"}),e.jsx("p",{children:"Sorry, page no found."})]});const r=f();let s;return g(r)?s=((o=r.error)==null?void 0:o.message)||r.statusText:r instanceof Error?s=r.message:typeof r=="string"?s=r:s="Unknown error",console.error(r),e.jsxs("div",{className:"error-page",children:[e.jsx("h1",{children:"Oops!"}),e.jsx("p",{children:"Sorry, an unexpected error has occurred."}),e.jsx("p",{children:e.jsx("i",{children:s})})]})},k=document.getElementById("main-node"),w=E([{element:e.jsx(N,{}),errorElement:e.jsx(i,{}),children:[{path:"/",element:e.jsx(h,{})},{path:"/404",element:e.jsx(i,{isNoFound:!0})},{path:"/list",element:e.jsx(h,{})},{path:"*",element:e.jsx(R,{to:"/404",replace:!0})}]},{path:"/login",element:e.jsx(c,{}),errorElement:e.jsx(i,{})},{path:"/register",element:e.jsx(c,{}),errorElement:e.jsx(i,{})}]);y(k).render(e.jsx(m,{children:e.jsx(v,{router:w})}));
