import{u as x,A as m}from"./index-10b44a33.js";import{r as s,j as e,Y as i,I as j,s as v,a as p,B as b}from"./libs-178596fd.js";const g=()=>{const t=x(),[o,d]=s.useState(""),[l,f]=s.useState(""),[a,n]=s.useState(""),[c,r]=s.useState(null),h=()=>{r(null),t.register({mail:o,username:l,pass:a}).then(u=>{u.error?r(u.message):r("Вы успешно зарегистрированы, теперь вы можете войти")})};return e.jsxs("div",{children:[e.jsx(i,{value:o,valueSetter:d,placeholder:"E-mail",label:"E-mail",borderColor:"#ffffff"}),e.jsx("br",{}),e.jsx(i,{value:l,valueSetter:f,placeholder:"Минимум 4 символа",label:"Nickname",borderColor:"#ffffff"}),e.jsx("br",{}),e.jsx(i,{value:a,valueSetter:n,placeholder:"Password",label:"Password",borderColor:"#ffffff"}),e.jsx("br",{}),c&&e.jsx("div",{className:"errors",children:c}),e.jsx("div",{className:"control-row",children:e.jsx(j,{onClick:h,children:"Register"})})]})},S=()=>{const t=x(),[o,d]=s.useState(""),[l,f]=s.useState(""),[a,n]=s.useState(null),c=()=>{n(null),t.login({username:o,pass:l}).then(r=>{r.error?n(r.message):(v("hash",r.data.token,36e3),n("Вы будете перенаправлены. Если перенаправление не работает, перейдите на адрес /list"),window.location.replace("/list"))})};return e.jsxs("div",{children:[e.jsx(i,{value:o,valueSetter:d,placeholder:"Минимум 4 символа",label:"Nickname",borderColor:"#ffffff"}),e.jsx("br",{}),e.jsx(i,{value:l,valueSetter:f,placeholder:"Password",label:"Password",borderColor:"#ffffff"}),e.jsx("br",{}),a&&e.jsx("div",{className:"errors",children:a}),e.jsx("div",{className:"control-row",children:e.jsx(j,{onClick:c,children:"Login"})})]})};const w=document.getElementById("main-node"),P=()=>{const t=window.location.href.includes("login")?0:1;return e.jsxs("div",{className:"auth-form",children:[e.jsx("h2",{style:{textAlign:"center"},children:"Test Auth App"}),e.jsx("div",{children:e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(b,{defaultIndex:t,tabs:[{caption:"Login",content:e.jsx(S,{})},{caption:"Register",content:e.jsx(g,{})}]})})})]})};p(w).render(e.jsx(s.StrictMode,{children:e.jsx(m,{children:e.jsx(P,{})})}));
