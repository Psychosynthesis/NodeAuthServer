import{u as h,a as u,A as p}from"./index-10b44a33.js";import{r as l,g as x,j as e,O as m,u as f,i as j,c as g,a as w,R as y,N as E}from"./libs-178596fd.js";const R=()=>{const n=h(),[r,s]=u(),{token:t}=r;return l.useEffect(()=>{x("hash")?n.updateToken().then(o=>{var i;o.error===!1&&(o.data,s({type:"setToken",load:(i=o.data)==null?void 0:i.token}))}):window.location.replace("/login")},[]),l.useEffect(()=>{t&&n.getUser().then(a=>{var o;a.error===!1?s({type:"setUserData",load:(o=a.data)==null?void 0:o.user}):console.error(a.message)})},[t]),e.jsxs(e.Fragment,{children:[(r==null?void 0:r.user)&&e.jsxs("div",{children:["User: ",r.user.username]}),e.jsx(m,{})]})},c=()=>(u(),e.jsx("div",{className:"list",children:e.jsx("h2",{style:{textAlign:"center"},children:"List"})}));const d=({isNoFound:n})=>{var t;if(n)return e.jsxs("div",{className:"error-page",children:[e.jsx("h1",{children:"404"}),e.jsx("p",{children:"Sorry, page no found."})]});const r=f();let s;return j(r)?s=((t=r.error)==null?void 0:t.message)||r.statusText:r instanceof Error?s=r.message:typeof r=="string"?s=r:s="Unknown error",console.error(r),e.jsxs("div",{className:"error-page",children:[e.jsx("h1",{children:"Oops!"}),e.jsx("p",{children:"Sorry, an unexpected error has occurred."}),e.jsx("p",{children:e.jsx("i",{children:s})})]})},v=document.getElementById("main-node"),k=g([{element:e.jsx(R,{}),errorElement:e.jsx(d,{}),loader:async()=>(window.location.href.includes("login")&&window.location.replace("/login"),window.location.href.includes("register")&&window.location.replace("/register"),null),children:[{path:"/",element:e.jsx(c,{})},{path:"/404",element:e.jsx(d,{isNoFound:!0})},{path:"/list",element:e.jsx(c,{})},{path:"*",element:e.jsx(E,{to:"/404",replace:!0})}]}]);w(v).render(e.jsx(p,{children:e.jsx(y,{router:k})}));
